<!DOCTYPE html>
<html>
<head>
  <title>Treasurer Dashboard - YM Finance</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .stats { display: flex; gap: 20px; margin-bottom: 30px; }
    .stat-card { 
      background: #f5f5f5; 
      padding: 20px; 
      border-radius: 8px; 
      flex: 1;
      text-align: center;
    }
    .stat-number { font-size: 32px; font-weight: bold; color: #333; }
    .stat-label { color: #666; margin-top: 5px; }
    .section { margin-bottom: 30px; }
    .section h2 { border-bottom: 2px solid #333; padding-bottom: 10px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background-color: #f5f5f5; font-weight: bold; }
    .status { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
    .status-pending { background: #fff3cd; color: #856404; }
    .status-approved { background: #d4edda; color: #155724; }
    .status-rejected { background: #f8d7da; color: #721c24; }
    .nav-menu { margin-top: 20px; }
    .nav-menu a { 
      display: inline-block; 
      margin-right: 15px; 
      padding: 8px 16px; 
      background: #007bff; 
      color: white; 
      text-decoration: none; 
      border-radius: 4px; 
    }
    .nav-menu a:hover { background: #0056b3; }
    .btn-primary {
      background: #28a745;
      color: white;
      padding: 10px 20px;
      text-decoration: none;
      border-radius: 4px;
      display: inline-block;
      margin-top: 20px;
    }
    .btn-primary:hover { background: #218838; }
  </style>
</head>
<body>
  <div class="header">
    <div>
      <h1>Treasurer Dashboard</h1>
      <p>Welcome, Treasurer</p>
    </div>
    <div>
      <a href="{% url 'logout' %}" style="color: #dc3545;">Logout</a>
    </div>
  </div>

  <div class="stats">
    <div class="stat-card">
      <div class="stat-number">{{ stats.pending }}</div>
      <div class="stat-label">Pending Requests</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ stats.approved }}</div>
      <div class="stat-label">Approved</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ stats.rejected }}</div>
      <div class="stat-label">Rejected</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ stats.total }}</div>
      <div class="stat-label">Total Submitted</div>
    </div>
  </div>

  <div class="nav-menu">
    <a href="{% url 'new_budget' %}">Submit New Budget Request</a>
    <a href="{% url 'budget_request_list' %}">View All My Requests</a>
  </div>

  <div class="section">
    <h2>My Budget Requests</h2>
    {% if my_requests %}
      <table>
        <thead>
          <tr>
            <th>Request ID</th>
            <th>City</th>
            <th>Month</th>
            <th>Description</th>
            <th>Status</th>
            <th>Submitted</th>
          </tr>
        </thead>
        <tbody>
          {% for req in my_requests %}
          <tr>
            <td>{{ req.0 }}</td>
            <td>{{ req.1 }}</td>
            <td>{{ req.2 }}</td>
            <td>{{ req.3|truncatewords:15 }}</td>
            <td>
              <span class="status status-{{ req.4|lower }}">{{ req.4 }}</span>
            </td>
            <td>{{ req.5|date:"Y-m-d H:i" }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>You haven't submitted any budget requests yet.</p>
      <a href="{% url 'new_budget' %}" class="btn-primary">Submit Your First Request</a>
    {% endif %}
  </div>

  <div class="section">
    <h2>Quick Actions</h2>
    <p>As a treasurer, you can:</p>
    <ul>
      <li>Submit budget requests for your city</li>
      <li>Track the status of your submissions</li>
      <li>View approved budgets for planning</li>
    </ul>
  </div>
</body>
</html>
